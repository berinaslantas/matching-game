<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EÅŸleÅŸtirme Oyunu</title>
<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0d1117;
    color: #c9d1d9;
    padding: 20px;
    text-align: center;
}
select, button {
    margin: 6px;
    padding: 6px 12px;
    background: #161b22;
    color: #c9d1d9;
    border: 1px solid #30363d;
    border-radius: 6px;
}
.game {
    display: flex;
    gap: 12px;
    margin-top: 12px;
}
.column { width: 50%; }
.card {
    background: #161b22;
    padding: 14px;
    margin: 8px 0;
    border-radius: 10px;
    border: 1px solid #30363d;
    cursor: pointer;
    transition: 0.15s;
    color: #c9d1d9;
}
.card.selected { border-color: #58a6ff; }
.card.correct { color:#2ea043; }
.card.wrong { color:#ff7f0e; }
</style>
</head>
<body>

<h2>ðŸ”— EÅŸleÅŸtirme Oyunu</h2>

<select id="mainUnit"></select>
<select id="subUnit"></select>
<button onclick="startGame()">BaÅŸlat</button>

<div class="game">
    <div class="column" id="leftCol"></div>
    <div class="column" id="rightCol"></div>
</div>

<script>
/* ===== VERÄ°LER ===== */
const units = {
    "Matematik": {
        "1. Ãœnite": [
            { left: "2+2", right: "4" },
            { left: "5*3", right: "15" },
            { left: "7-2", right: "5" },
            { left: "10/2", right: "5" },
            { left: "3*3", right: "9" }
        ]
    }
};

const mainUnit = document.getElementById("mainUnit");
const subUnit = document.getElementById("subUnit");
const leftCol = document.getElementById("leftCol");
const rightCol = document.getElementById("rightCol");

let slotsLeft = [];
let slotsRight = [];
let selLeft = null;
let selRight = null;

function shuffle(a) { return a.sort(() => Math.random() - 0.5); }

/* ===== SELECTOR ===== */
function fillSelectors() {
    mainUnit.innerHTML = "";
    Object.keys(units).forEach(k => mainUnit.innerHTML += `<option>${k}</option>`);
    loadSub();
}
function loadSub() {
    subUnit.innerHTML = "";
    Object.keys(units[mainUnit.value]).forEach(k => subUnit.innerHTML += `<option>${k}</option>`);
}
mainUnit.onchange = loadSub;

/* ===== OYUN BAÅžLAT ===== */
function startGame() {
    slotsLeft = [...units[mainUnit.value][subUnit.value]];
    slotsRight = shuffle([...slotsLeft]); // sadece ilk baÅŸta karÄ±ÅŸÄ±k
    render();
}

/* ===== RENDER ===== */
function render() {
    leftCol.innerHTML = "";
    rightCol.innerHTML = "";

    slotsLeft.forEach((p, i) => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerText = p.left;
        d.onclick = () => { selLeft = i; select(); };
        leftCol.appendChild(d);
    });

    slotsRight.forEach((p, i) => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerText = p.right;
        d.onclick = () => { selRight = i; select(); };
        rightCol.appendChild(d);
    });
}

function select() {
    document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
    if (selLeft !== null) leftCol.children[selLeft].classList.add("selected");
    if (selRight !== null) rightCol.children[selRight].classList.add("selected");

    if (selLeft !== null && selRight !== null) check();
}

/* ===== KONTROL ===== */
function check() {
    const leftPair = slotsLeft[selLeft];
    const rightPair = slotsRight[selRight];

    if (leftPair.right === rightPair.right) {
        leftCol.children[selLeft].classList.add("correct");
        rightCol.children[selRight].classList.add("correct");
    } else {
        leftCol.children[selLeft].classList.add("wrong");
        rightCol.children[selRight].classList.add("wrong");
        setTimeout(() => {
            leftCol.children[selLeft].classList.remove("wrong");
            rightCol.children[selRight].classList.remove("wrong");
        }, 300);
    }

    selLeft = selRight = null;
}

fillSelectors();
</script>
</body>
</html>
