<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EÅŸleÅŸtirme Oyunu</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #0d1117; color: #c9d1d9; padding: 20px; text-align: center; }
select, button { margin: 6px; padding: 6px 12px; background: #161b22; color: #c9d1d9; border: 1px solid #30363d; border-radius: 6px; }
.game { display: flex; gap: 12px; margin-top: 12px; }
.column { width: 50%; }
.card { background: #161b22; padding: 14px; margin: 8px 0; border-radius: 10px; border: 1px solid #30363d; cursor: pointer; transition: 0.15s; color: #c9d1d9; }
.card.selected { border-color: #58a6ff; }
.card.correct { color:#2ea043; }
.card.wrong { color:#ff7f0e; }
.card.empty { visibility: hidden; }
</style>
</head>
<body>

<h2>ðŸ”— EÅŸleÅŸtirme Oyunu</h2>

<select id="mainUnit"></select>
<select id="subUnit"></select>
<button onclick="startGame()">BaÅŸlat</button>

<div class="game">
    <div class="column" id="leftCol"></div>
    <div class="column" id="rightCol"></div>
</div>

<script>
const mainUnit = document.getElementById("mainUnit");
const subUnit = document.getElementById("subUnit");
const leftCol = document.getElementById("leftCol");
const rightCol = document.getElementById("rightCol");

/* ===== VERÄ°LER ===== */
const units = {
    "Ä°slamiyet Ã–ncesi TÃ¼rk Tarihi": {
        "TÃ¼rk adÄ±nÄ±n anlamlarÄ±": [
            { left: "Wambery", right: "TÃ¼remek" },
            { left: "Doerfer", right: "Devlete baÄŸlÄ± halk" },
            { left: "KaÅŸgarlÄ± Mahmut", right: "Olgunluk Ã‡aÄŸÄ±" },
            { left: "Ä°ran KaynaklarÄ±", right: "GÃ¼zel Ä°nsan" },
            { left: "Ã‡in KaynaklarÄ±", right: "MiÄŸfer" },
            { left: "Ziya GÃ¶kalp", right: "Kanun ve nizam sahibi" }
        ]
    },
    "Avrupa TÃ¼rkleri": [
            { left: "Avrupa Hun Devleti", right: "Kurucusu Balamir -Macaristanda" },
            { left: "Avrupa Hun Devleti en parlak dÃ¶nem", right: "Attila" },
            { left: "Avrupa Hun Devleti", right: "Avrupa'da kurulan ilk TÃ¼rk devleti" },
            { left: "Hem Orta Asya hem Avrupada Kurulanlar", right: "BÃ¼yÃ¼k Hunlar ve Avarlar" },
            { left: "Avrupa Hun Devleti", right: "Margos BarÄ±ÅŸÄ± ve Anatolyus Ant." },
            { left: "Avrupa Hun Devleti", right: "Galya ve Ä°talya seferleri (PapanÄ±n ricasÄ±)" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "Papa I. Leon'un ricasÄ±" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "Roma'nÄ±n Hristiyanlarca kutsal olmasÄ±" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "BatÄ± Roma'nÄ±n gÃ¼cÃ¼nÃ¼ kÄ±rdÄ±ÄŸÄ±na inanmasÄ±" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "DoÄŸuda Sasani tehlikesinin bulunmasÄ±" },
            { left: "Attilla'nÄ±n Ã¼nvanlarÄ±", right: "(Etzel (Nibelungen)(Hun burgant mÃ¼cadelesi)" },
            { left: "Attilla'nÄ±n Ã¼nvanlarÄ±", right: "Cesur Kavimlerin Efendisi" },
            { left: "Attilla'nÄ±n Ã¼nvanlarÄ±", right: "TanrÄ±nÄ±n kamÃ§Ä±sÄ±" },
            { left: "Avarlar", right: "Kurucusu Bayan Han" },
            { left: "Avarlar", right: "Ä°stanbul'u kuÅŸatan ilk TÃ¼rk devleti (2 kere)" },
            { left: "Avarlar", right: "Ãœzengi yapÄ±mÄ±nÄ± AvrupalÄ±lara Ã¶ÄŸretmiÅŸ" },
            { left: "Avarlar", right: "Juan Juan TÃ¼rkleri" },
            { left: "Avarlar", right: "Frank saldÄ±rÄ±larÄ±yla yÄ±kÄ±lmÄ±ÅŸ" }
        ]
    },
    "Matematik": {
        "1. Ãœnite": [
            { left: "2+2", right: "4" },
            { left: "5*3", right: "15" }
        ]
    }
};

const PAGE_SIZE = 4;
let pool = [];
let activeLeft = [];
let activeRight = [];
let selLeftIndex = null;
let selRightIndex = null;

function shuffle(a) { return a.sort(() => Math.random() - 0.5); }
function rand(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

/* ===== SELECTOR ===== */
function fillSelectors() {
    mainUnit.innerHTML = "";
    Object.keys(units).forEach(k => mainUnit.innerHTML += `<option>${k}</option>`);
    loadSub();
}
function loadSub() {
    subUnit.innerHTML = "";
    Object.keys(units[mainUnit.value]).forEach(k => subUnit.innerHTML += `<option>${k}</option>`);
}
mainUnit.onchange = loadSub;

/* ===== OYUN ===== */
function startGame() {
    pool = shuffle([...units[mainUnit.value][subUnit.value]]);
    activeLeft = [];
    activeRight = [];
    for (let i = 0; i < PAGE_SIZE; i++) {
        const p = pool.shift();
        if (!p) break;
        activeLeft.push(p);
        activeRight.push(p);
    }
    render();
}

function render() {
    leftCol.innerHTML = "";
    rightCol.innerHTML = "";
    activeLeft.forEach((p, i) => leftCol.appendChild(card(p ? p.left : "", () => selectLeft(i), !!p)));
    activeRight.forEach((p, i) => rightCol.appendChild(card(p ? p.right : "", () => selectRight(i), !!p)));
}

function card(text, fn, visible) {
    const d = document.createElement("div");
    d.className = "card";
    if (!visible) d.classList.add("empty");
    d.innerText = text;
    d.onclick = fn;
    return d;
}

function selectLeft(i) { clearSelect(); selLeftIndex=i; leftCol.children[i].classList.add("selected"); check(); }
function selectRight(i) { clearSelect(); selRightIndex=i; rightCol.children[i].classList.add("selected"); check(); }
function clearSelect() { document.querySelectorAll(".card").forEach(c => c.classList.remove("selected")); }

function check() {
    if (selLeftIndex === null || selRightIndex === null) return;
    const L = activeLeft[selLeftIndex];
    const R = activeRight[selRightIndex];
    if (L && R && L === R) {
        activeLeft[selLeftIndex] = null;
        activeRight[selRightIndex] = null;
        refill();
    }
    selLeftIndex = selRightIndex = null;
    render();
}

/* ===== YENÄ° PAÄ°RÄ° SAÄžA RASTGELE YERLEÅžTÄ°R ===== */
function refill() {
    if (!pool.length) return;
    const p = pool.shift();
    // solda ilk boÅŸ yerine koy
    const emptyLeft = activeLeft.map((v,i)=>v===null?i:null).filter(v=>v!==null);
    if (emptyLeft.length) activeLeft[emptyLeft[0]] = p;
    // saÄŸda rastgele boÅŸ slot
    const emptyRight = activeRight.map((v,i)=>v===null?i:null).filter(v=>v!==null);
    if (emptyRight.length) activeRight[rand(emptyRight)] = p;
}

fillSelectors();
</script>
</body>
</html>

