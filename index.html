<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EÅŸleÅŸtirme Oyunu</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0d1117;
    color: #c9d1d9;
    padding: 20px;
    text-align: center;
}
select, button {
    margin: 6px;
    padding: 6px 12px;
    background: #161b22;
    color: #c9d1d9;
    border: 1px solid #30363d;
    border-radius: 6px;
}
.game {
    display: flex;
    gap: 12px;
    margin-top: 12px;
}
.column { width: 50%; }
.card {
    background: #161b22;
    padding: 14px;
    margin: 8px 0;
    border-radius: 10px;
    border: 1px solid #30363d;
    cursor: pointer;
    transition: 0.15s;
    color: #c9d1d9;
}
.card.selected { border-color: #58a6ff; }
.card.correct { color:#2ea043; }
.card.wrong { color:#ff7f0e; }
</style>
</head>
<body>

<h2>ðŸ”— EÅŸleÅŸtirme Oyunu</h2>

<select id="mainUnit"></select>
<select id="subUnit"></select>
<button onclick="startGame()">BaÅŸlat</button>
<button onclick="startGeneralWrongs()">Genel YanlÄ±ÅŸlar</button>

<div class="game">
    <div class="column" id="leftCol"></div>
    <div class="column" id="rightCol"></div>
</div>

<script>
/* ===== VERÄ°LER ===== */
const units = {
    "Ä°slamiyet Ã–ncesi TÃ¼rk Tarihi": {
        "TÃ¼rk adÄ±nÄ±n anlamlarÄ±": [
            { left: "Wambery", right: "TÃ¼remek" },
            { left: "Doerfer", right: "Devlete baÄŸlÄ± halk" },
            { left: "KaÅŸgarlÄ± Mahmut", right: "Olgunluk Ã‡aÄŸÄ±" },
            { left: "Ä°ran KaynaklarÄ±", right: "GÃ¼zel Ä°nsan" },
            { left: "Ã‡in KaynaklarÄ±", right: "MiÄŸfer" },
            { left: "Ziya GÃ¶kalp", right: "Kanun ve nizam sahibi" },
            { left: "DiÄŸer", right: "GÃ¼Ã§lÃ¼, kuvvetli, terk edilmiÅŸ" }
        ],
        "Orta Asya KÃ¼ltÃ¼r Merkezleri": [
            { left: "Anav", right: "en eski (At ilk kez)" },
            { left: "Afanesyova", right: "en eski TÃ¼rk (Minusinsk)" },
            { left: "Tagar", right: "en geliÅŸmiÅŸ (AltaylÄ±lar)" },
            { left: "Andronova", right: "TÃ¼rk atalarÄ±nÄ±n yaÅŸadÄ±ÄŸÄ±" },
            { left: "Karasuk", right: "ilk demir iÅŸlendiÄŸi yer" },
            { left: "Kelteminar", right: "yerleÅŸik yaÅŸam" }
        ],
        "Boylar": [
            { left: "Anav", right: "en eski (At ilk kez)" },
            { left: "Afanesyova", right: "en eski TÃ¼rk (Minusinsk)" },
            { left: "Tagar", right: "en geliÅŸmiÅŸ (AltaylÄ±lar)" },
            { left: "Andronova", right: "TÃ¼rk atalarÄ±nÄ±n yaÅŸadÄ±ÄŸÄ±" },
            { left: "Karasuk", right: "ilk demir iÅŸlendiÄŸi yer" },
            { left: "Kelteminar", right: "yerleÅŸik yaÅŸam" }
        ],
        "Orta Asya TÃ¼rkleri": [
            { left: "Sakalar", right: "Bilinen ilk TÃ¼rk boyu" },
            { left: "Sakalar", right: "Alp Er Tunga" },
            { left: "Sakalar", right: "lk TÃ¼rk kadÄ±n hÃ¼kÃ¼mdar Tomris Hatun" },
            { left: "Sakalar", right: "Amazon (kadÄ±n savaÅŸÃ§Ä±lar)" },
            { left: "Sakalar", right: "Balbal (mezar taÅŸÄ±) dikme geleneÄŸi" },
            { left: "Sakalar", right: "AtÄ± evcilleÅŸtirmiÅŸ dÃ¼nyada ilk Ã¼zengi" },
            { left: "Sakalar", right: "GÃ¼nÃ¼mÃ¼zde Rusya Federasyonunda Yakut TÃ¼rkleri" },
            { left: "Sakalar", right: "BozkÄ±rÄ±n kuyumcularÄ±" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "Kurucusu Teoman" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "BaÅŸkenti Ã–tÃ¼ken. Kutsal bÃ¶lge veya Toprak Ana" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "Mete Vatan Sevgisi(Tunguzlara toprak vermeyip) ilk TÃ¼rk hÃ¼kÃ¼mdar" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "Mete orduda onlu sistem" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "TÃ¼rk tarihinin ilk yazÄ±lÄ± antlaÅŸmasÄ± Ã‡inlilerle yapÄ±lan Kuzey Åžansi" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "Orta Asyada Mete TÃ¼rk boylarÄ±nÄ±(26) bir bayrak altÄ±nda toplayan ilk devlet" },
            { left: "Asya Hun Devleti (BÃ¼yÃ¼k Hun)", right: "Orta Asyada ilk defa siyasi birlik -Mete Han" },
            { left: "Mukan KaÄŸan", right: "I. GÃ¶ktÃ¼rklerde TÃ¼rk siyasi birliÄŸi saÄŸlayan" },
            { left: "Kapgan KaÄŸan", right: "II. GÃ¶ktÃ¼rklerde TÃ¼rk siyasi birliÄŸi saÄŸlayan" },
            { left: "BatÄ± Hun hÃ¼kÃ¼mdarÄ± Ã‡iÃ§i ", right: " istiklali feda etmeyi gÃ¼lÃ¼nÃ§ ve utanÃ§ verici bulmuÅŸ " },
            { left: "BatÄ± Hun hÃ¼kÃ¼mdarÄ± Balamir", right: "Kavimler gÃ¶Ã§Ã¼ne Ã¶nderlik etmiÅŸ" }
        ],
        "Avrupa TÃ¼rkleri": [
            { left: "Avrupa Hun Devleti", right: "Kurucusu Balamir -Macaristanda" },
            { left: "Avrupa Hun Devleti en parlak dÃ¶nem", right: "Attila" },
            { left: "Avrupa Hun Devleti", right: "Avrupa'da kurulan ilk TÃ¼rk devleti" },
            { left: "Hem Orta Asya hem Avrupada Kurulanlar", right: "BÃ¼yÃ¼k Hunlar ve Avarlar" },
            { left: "Avrupa Hun Devleti", right: "Margos BarÄ±ÅŸÄ± ve Anatolyus Ant." },
            { left: "Avrupa Hun Devleti", right: "Galya ve Ä°talya seferleri (PapanÄ±n ricasÄ±)" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "Papa I. Leon'un ricasÄ±" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "Roma'nÄ±n Hristiyanlarca kutsal olmasÄ±" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "BatÄ± Roma'nÄ±n gÃ¼cÃ¼nÃ¼ kÄ±rdÄ±ÄŸÄ±na inanmasÄ±" },
            { left: "Atilla'nÄ±n Roma'yÄ± almaktan vazgeÃ§me nedenleri:", right: "DoÄŸuda Sasani tehlikesinin bulunmasÄ±" },
            { left: "Attilla'nÄ±n Ã¼nvanlarÄ±", right: "(Etzel (Nibelungen)(Hun burgant mÃ¼cadelesi)" },
            { left: "Attilla'nÄ±n Ã¼nvanlarÄ±", right: "Cesur Kavimlerin Efendisi" },
            { left: "Attilla'nÄ±n Ã¼nvanlarÄ±", right: "TanrÄ±nÄ±n kamÃ§Ä±sÄ±" },
            { left: "Avarlar", right: "Kurucusu Bayan Han" },
            { left: "Avarlar", right: "Ä°stanbul'u kuÅŸatan ilk TÃ¼rk devleti (2 kere)" },
            { left: "Avarlar", right: "Ãœzengi yapÄ±mÄ±nÄ± AvrupalÄ±lara Ã¶ÄŸretmiÅŸ" },
            { left: "Avarlar", right: "Juan Juan TÃ¼rkleri" },
            { left: "Avarlar", right: "Frank saldÄ±rÄ±larÄ±yla yÄ±kÄ±lmÄ±ÅŸ" }
        ]
    },
    "Matematik": {
        "1. Ãœnite": [
            { left: "2+2", right: "4" },
            { left: "5*3", right: "15" }
        ]
    }
};

const PAGE_SIZE = 5;
let pool = [];
let active = [];
let selLeft = null;
let selRight = null;
let streak = 0;

/* ===== SESLER ===== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playCorrect() {
    streak++;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = "triangle";
    let freq = 800 * (1 + streak*0.2);
    if (freq > 2000) freq = 2000;
    osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
    gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.4);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.4);
}

function playWrong() {
    streak = 0;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = "sine";
    osc.frequency.setValueAtTime(180, audioCtx.currentTime);
    gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.5);
}

/* ===== GENEL YANLIÅžLAR ===== */
const STORAGE_KEY = "general_wrongs_v4";
let generalWrongs = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
function saveWrongs() { localStorage.setItem(STORAGE_KEY, JSON.stringify(generalWrongs)); }
function markWrong(p) {
    const k = p.left + "||" + p.right;
    if (!generalWrongs[k]) generalWrongs[k] = { wrong: 0, correct: 0, pair: p };
    generalWrongs[k].wrong++;
    saveWrongs();
}
function markCorrect(p) {
    const k = p.left + "||" + p.right;
    if (!generalWrongs[k]) return;
    generalWrongs[k].correct++;
    if (generalWrongs[k].correct >= 2) delete generalWrongs[k];
    saveWrongs();
}

/* ===== OYUN ===== */
function shuffle(a) { return a.sort(() => Math.random() - 0.5); }

function fillSelectors() {
    mainUnit.innerHTML = "";
    Object.keys(units).forEach(k => mainUnit.innerHTML += `<option>${k}</option>`);
    loadSub();
}

function loadSub() {
    subUnit.innerHTML = "";
    Object.keys(units[mainUnit.value]).forEach(k => subUnit.innerHTML += `<option>${k}</option>`);
}

mainUnit.onchange = loadSub;

function startGame() {
    streak = 0;
    pool = shuffle([...units[mainUnit.value][subUnit.value]]);
    active = pool.splice(0, PAGE_SIZE);
    render();
}

function startGeneralWrongs() {
    streak = 0;
    pool = shuffle(Object.values(generalWrongs).map(o => o.pair));
    active = pool.splice(0, PAGE_SIZE);
    render();
}

function render() {
    leftCol.innerHTML = "";
    rightCol.innerHTML = "";

    active.forEach(p => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerText = p.left;
        d.onclick = () => { selLeft = p; select(d); };
        leftCol.appendChild(d);
    });

    shuffle([...active]).forEach(p => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerText = p.right;
        d.onclick = () => { selRight = p; select(d); };
        rightCol.appendChild(d);
    });
}

function select() {
    document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
    if (selLeft !== null) leftCol.children[selLeft].classList.add("selected");
    if (selRight !== null) rightCol.children[selRight].classList.add("selected");

    if (selLeft !== null && selRight !== null) check();
}

function check() {
    const leftPair = slotsLeft[selLeft];
    const rightPair = slotsRight[selRight];

    if (leftPair.right === rightPair.right) {
        leftCol.children[selLeft].classList.add("correct");
        rightCol.children[selRight].classList.add("correct");
    } else {
        leftCol.children[selLeft].classList.add("wrong");
        rightCol.children[selRight].classList.add("wrong");
        setTimeout(() => {
            leftCol.children[selLeft].classList.remove("wrong");
            rightCol.children[selRight].classList.remove("wrong");
        }, 300);
    }

    selLeft = selRight = null;
}

fillSelectors();
</script>
</body>
</html>


