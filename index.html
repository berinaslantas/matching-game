<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Eşleştirme Oyunu</title>
<style>
  body { font-family: Arial; padding: 20px; }
  .question { margin-bottom: 10px; }
  .left { display: inline-block; width: 200px; font-weight: bold; }
  .right { display: inline-block; padding: 5px 10px; margin: 2px; border: 1px solid #333; cursor: pointer; }
  .right.correct { background-color: #4CAF50; color: white; }
  .right.wrong { background-color: #F44336; color: white; }
</style>
</head>
<body>

<h1>Eşleştirme Oyunu</h1>
<div id="game"></div>
<button id="nextUnitBtn" style="display:none;">Sonraki Üniteye Geç</button>

<audio id="correctSound" src="correct.mp3"></audio>
<audio id="wrongSound" src="wrong.mp3"></audio>

<script>
// ----------------- VERİLER -----------------
const units = {
    "İslamiyet Öncesi Türk Tarihi": {
        "Türk adının anlamları": [
            { left: "Wambery", right: "Türemek" },
            { left: "Doerfer", right: "Devlete bağlı halk" },
            { left: "Kaşgarlı Mahmut", right: "Olgunluk Çağı" },
            { left: "İran Kaynakları", right: "Güzel İnsan" },
            { left: "Çin Kaynakları", right: "Miğfer" },
            { left: "Ziya Gökalp", right: "Kanun ve nizam sahibi" },
            { left: "Diğer", right: "Güçlü, kuvvetli, terk edilmiş" }
        ],
        "Orta Asya Kültür Merkezleri": [
            { left: "Anav", right: "en eski (At ilk kez)" },
            { left: "Afanesyova", right: "en eski Türk (Minusinsk)" },
            { left: "Tagar", right: "en gelişmiş (Altaylılar)" },
            { left: "Andronova", right: "Türk atalarının yaşadığı" },
            { left: "Karasuk", right: "ilk demir işlendiği yer" },
            { left: "Kelteminar", right: "yerleşik yaşam" }
        ],
        "Boylar": [
            { left: "Anav", right: "en eski (At ilk kez)" },
            { left: "Afanesyova", right: "en eski Türk (Minusinsk)" },
            { left: "Tagar", right: "en gelişmiş (Altaylılar)" },
            { left: "Andronova", right: "Türk atalarının yaşadığı" },
            { left: "Karasuk", right: "ilk demir işlendiği yer" },
            { left: "Kelteminar", right: "yerleşik yaşam" }
        ],
        "Orta Asya Türkleri": [
            { left: "Sakalar", right: "Bilinen ilk Türk boyu" },
            { left: "Sakalar", right: "Alp Er Tunga" },
            { left: "Sakalar", right: "lk Türk kadın hükümdar Tomris Hatun" },
            { left: "Sakalar", right: "Amazon (kadın savaşçılar)" },
            { left: "Sakalar", right: "Balbal (mezar taşı) dikme geleneği" },
            { left: "Sakalar", right: "Atı evcilleştirmiş dünyada ilk üzengi" },
            { left: "Sakalar", right: "Günümüzde Rusya Federasyonunda Yakut Türkleri" },
            { left: "Sakalar", right: "Bozkırın kuyumcuları" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Kurucusu Teoman" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Başkenti Ötüken. Kutsal bölge veya Toprak Ana" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Mete Vatan Sevgisi(Tunguzlara toprak vermeyip) ilk Türk hükümdar" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Mete orduda onlu sistem" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Türk tarihinin ilk yazılı antlaşması Çinlilerle yapılan Kuzey Şansi" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Orta Asyada Mete Türk boylarını(26) bir bayrak altında toplayan ilk devlet" },
            { left: "Asya Hun Devleti (Büyük Hun)", right: "Orta Asyada ilk defa siyasi birlik -Mete Han" },
            { left: "Mukan Kağan", right: "I. Göktürklerde Türk siyasi birliği sağlayan" },
            { left: "Kapgan Kağan", right: "II. Göktürklerde Türk siyasi birliği sağlayan" },
            { left: "Batı Hun hükümdarı Çiçi ", right: " istiklali feda etmeyi gülünç ve utanç verici bulmuş " },
            { left: "Batı Hun hükümdarı Balamir", right: "Kavimler göçüne önderlik etmiş" }
        ],
            "Avrupa Türkleri": [
            { left: "Avrupa Hun Devleti", right: "Kurucusu Balamir -Macaristanda" },
            { left: "Avrupa Hun Devleti en parlak dönem", right: "Attila" },
            { left: "Avrupa Hun Devleti", right: "Avrupa'da kurulan ilk Türk devleti" },
            { left: "Hem Orta Asya hem Avrupada Kurulanlar", right: "Büyük Hunlar ve Avarlar" },
            { left: "Avrupa Hun Devleti", right: "Margos Barışı ve Anatolyus Ant." },
            { left: "Avrupa Hun Devleti", right: "Galya ve İtalya seferleri (Papanın ricası)" },
            { left: "Atilla'nın Roma'yı almaktan vazgeçme nedenleri:", right: "Papa I. Leon'un ricası" },
            { left: "Atilla'nın Roma'yı almaktan vazgeçme nedenleri:", right: "Roma'nın Hristiyanlarca kutsal olması" },
            { left: "Atilla'nın Roma'yı almaktan vazgeçme nedenleri:", right: "Batı Roma'nın gücünü kırdığına inanması" },
            { left: "Atilla'nın Roma'yı almaktan vazgeçme nedenleri:", right: "Doğuda Sasani tehlikesinin bulunması" },
            { left: "Attilla'nın ünvanları ", right: "(Etzel (Nibelungen)(Hun burgant mücadelesi)" },
                { left: "Attilla'nın ünvanları ", right: "Cesur Kavimlerin Efendisi" },
                { left: "Attilla'nın ünvanları ", right: "Tanrının kamçısı" },
            { left: "Avarlar", right: "Kurucusu Bayan Han" },
            { left: "Avarlar", right: "İstanbul'u kuşatan ilk Türk devleti (2 kere)" },
            { left: "Avarlar", right: "Üzengi yapımını Avrupalılara öğretmiş" },
            { left: "Avarlar", right: "Juan Juan Türkleri" },
            { left: "Avarlar", right: "Frank saldırılarıyla yıkılmış" },
            { left: "Peçenekler, Avarlar, Tuna Bulgarları", right: "İstanbul'u kuşatmış" },
            { left: "Peçenekler, Uzlar, Kıpçaklar", right: "Bizans'ta ücretli askerlik" },
            { left: "Peçenekler, Uzlar, Kıpçaklar", right: "Malazgirt savaşı sırasında taraf değiştirmiş" },
            { left: "Uzlar", right: "Oğuzların Hristiyan olanı" },
            { left: "Uzlar", right: " Romanya'nın Dobruca - Gagavuz Türkleri" },
            { left: "Macarlar", right: "Türk tarihinde ilk defa Türkoloji enstitüsünü kurmuş" },
            { left: "Macarlar", right: "Türk kurultayı (2008-) BUGAC" },
            { left: "Macarlar", right: "Bilinen ilk liderleri Arpad" },
            { left: "Bulgarlar", right: "kelime anlamı karışık - karışmak" },
            { left: "Bulgarlar (İtil)", right: "Almış Han zamanında Müslüman" },
            { left: "Bulgarlar (İtil)", right: "İbn-i Fablan Rihle (Yolculuk) eseri" },
            { left: "Bulgarlar (İtil)", right: "İlk Müslüman Türk devletidir" },
            { left: "Bulgarlar (İtil)", right: "Avrupa'nın kuzeyinde kurulmuş" },
            { left: "Bulgarlar (İtil)", right: "İslamiyet devletin resmi dini diyen ilk Türk devleti" },
            { left: "Bulgarlar (Tuna)", right: "Barış Han zamanında Hristiyan " },
            { left: "Bulgarlar (Tuna)", right: "Han unvanını bırakıp Çar unvanı -Simon" },
            { left: "Sibirler", right: "yoldan sapan" },
            { left: "Kıpçaklar (Kumanlar)", right: "Oğuzlarla -Dede Korkut Hikayeleri" },
            { left: "Kıpçaklar (Kumanlar)", right: "Ruslarla mücadelede İgor destanı" },
            { left: "Kıpçaklar (Kumanlar)", right: "Codex Cumanius adında sözlük " },
            { left: "Kıpçaklar (Kumanlar)", right: "Eyyubilerin ve memlüklülerin ordusunda ücretli askerlik" },
            { left: "Kıpçaklar (Kumanlar)", right: "Bölgeye isimlerini vermişler Dest-i Kıpçak" },
            { left: "Kıpçaklar (Kumanlar)", right: "sarı,sarımtrak,sarı saçlı, öfkeli" },
            { left: "Kıpçaklar (Kumanlar)", right: "Altınorda Dev. Türkleşmesinde rol oynamış" },
            { left: "Hazarlar", right: "Museviliği kabul eden ilk ve son türk devleti" },
            { left: "Hazarlar,Türgişler", right: "Emevilerle savaşıp maveraunnehirin islamlaşmasını önledi" },
            { left: "Hazarlar", right: "Kürk yolunu kullanarak zenginleşmiş" },
            { left: "Maveraünnehir", right: "Seyhun ile Ceyhun arasındaki bölgey" },
            { left: "Hazarlar", right: "Türk tarihinde ilk kez ordusuna ücretli asker almış" },
            { left: "Hazarlar", right: "Yaşadıkları döneme Pax Hazaria" },
            { left: "Hazarlar", right: "Polonya'da Karaim veya Karaçay Türkleri" },
            { left: "Hazarlar", right: "Müslümanların başlarına Hazz adlı yönetici" }
        ]
     },
    "Matematik": {
        "1. Ünite": [
            { left: "2+2", right: "4" },
            { left: "5*3", right: "15" }
        ]
    }
};
// --------------------------------------------

const gameDiv = document.getElementById("game");
const nextUnitBtn = document.getElementById("nextUnitBtn");
const correctSound = document.getElementById("correctSound");
const wrongSound = document.getElementById("wrongSound");

let unitsKeys = Object.keys(units);
let currentUnitIndex = 0;
let currentUnit = units[unitsKeys[currentUnitIndex]];
let currentCategoryKeys = Object.keys(currentUnit);
let activeQuestions = [];
let questionPool = [];

function shuffleArray(a){ return a.sort(() => Math.random() - 0.5); }

function initUnit() {
    questionPool = [];
    currentCategoryKeys.forEach(cat => {
        // Her sorunun right değeri artık array olmalı
        currentUnit[cat].forEach(q=>{
            if(!Array.isArray(q.right)) q.right = [q.right];
            questionPool.push(q);
        });
    });
    questionPool = shuffleArray(questionPool);
    loadNextQuestions();
}

function loadNextQuestions() {
    gameDiv.innerHTML = "";
    activeQuestions = questionPool.splice(0,5);
    activeQuestions.forEach(q => addQuestionToScreen(q));

    if(activeQuestions.length === 0){
        nextUnitBtn.style.display = "block";
    } else {
        nextUnitBtn.style.display = "none";
    }
}

function addQuestionToScreen(q){
    let div = document.createElement("div");
    div.className = "question";
    let leftDiv = document.createElement("span");
    leftDiv.className = "left";
    leftDiv.textContent = q.left;
    div.appendChild(leftDiv);

    let rightDiv = document.createElement("span");
    rightDiv.className = "right";
    rightDiv.textContent = q.right.join(", "); // Görselde göstermek için tüm doğru seçenekleri birleştirebilirsin
    rightDiv.addEventListener("click", () => checkAnswer(q, rightDiv));
    div.appendChild(rightDiv);

    gameDiv.appendChild(div);
}

function checkAnswer(question, element){
    // Eğer element.textContent units'teki doğru seçeneklerden biriyle eşleşiyorsa
    if(question.right.includes(element.textContent) || question.right.some(r => element.textContent.includes(r))){
        element.classList.add("correct");
        correctSound.currentTime = 0;
        correctSound.play();
        setTimeout(() => {
            gameDiv.removeChild(element.parentElement);
            if(questionPool.length > 0){
                let newQ = questionPool.shift();
                addQuestionToScreen(newQ);
            } else if(gameDiv.children.length === 0){
                nextUnitBtn.style.display = "block";
            }
        }, 500);
    } else {
        element.classList.add("wrong");
        wrongSound.currentTime = 0;
        wrongSound.play();
        setTimeout(()=> element.classList.remove("wrong"), 500);
    }
}

nextUnitBtn.addEventListener("click", () => {
    currentUnitIndex++;
    if(currentUnitIndex < unitsKeys.length){
        currentUnit = units[unitsKeys[currentUnitIndex]];
        currentCategoryKeys = Object.keys(currentUnit);
        initUnit();
    } else {
        alert("Tüm üniteler tamamlandı!");
        nextUnitBtn.style.display = "none";
    }
});

// Başlat
initUnit();
</script>

</body>
</html>
