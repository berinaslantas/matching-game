<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EÅŸleÅŸtirme Oyunu</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0d1117;
    color: #c9d1d9;
    padding: 20px;
    text-align: center;
}
select, button {
    margin: 6px;
    padding: 6px 12px;
    background: #161b22;
    color: #c9d1d9;
    border: 1px solid #30363d;
    border-radius: 6px;
}
.game {
    display: flex;
    gap: 12px;
    margin-top: 12px;
}
.column { width: 50%; }
.card {
    background: #161b22;
    padding: 14px;
    margin: 8px 0;
    border-radius: 10px;
    border: 1px solid #30363d;
    cursor: pointer;
    transition: 0.15s;
}
.card.selected { border-color: #58a6ff; }
.card.correct { color:#2ea043; }
.card.wrong { color:#ff7f0e; }
</style>
</head>
<body>

<h2>ðŸ”— EÅŸleÅŸtirme Oyunu</h2>

<select id="mainUnit"></select>
<select id="subUnit"></select>
<button onclick="startGame()">BaÅŸlat</button>

<div class="game">
    <div class="column" id="leftCol"></div>
    <div class="column" id="rightCol"></div>
</div>

<script>
/* ================= VERÄ°LER ================= */
const units = {
    "Ä°slamiyet Ã–ncesi TÃ¼rk Tarihi": {
        "TÃ¼rk adÄ±nÄ±n anlamlarÄ±": [
            { left: "Wambery", right: "TÃ¼remek" },
            { left: "Doerfer", right: "Devlete baÄŸlÄ± halk" },
            { left: "KaÅŸgarlÄ± Mahmut", right: "Olgunluk Ã‡aÄŸÄ±" },
            { left: "Ä°ran KaynaklarÄ±", right: "GÃ¼zel Ä°nsan" },
            { left: "Ã‡in KaynaklarÄ±", right: "MiÄŸfer" },
            { left: "Ziya GÃ¶kalp", right: "Kanun ve nizam sahibi" },
            { left: "DiÄŸer", right: "GÃ¼Ã§lÃ¼, kuvvetli, terk edilmiÅŸ" }
        ]
    },
    "KARIÅžIK": {
        "karÄ±ÅŸÄ±k bilgiler": [
            { left: "MaveraÃ¼nnehir", right: "Seyhun ile Ceyhun arasÄ±" },
            { left: "Avarlar", right: "Kelime anlamÄ± direnmek, engel olmak" },
            { left: "Avarlar", right: "Kurucusu Bayan Han" },
            { left: "Avarlar", right: "TÃ¶les savaÅŸÄ±yla I. KÃ¶ktÃ¼rkler tarafÄ±ndan yÄ±kÄ±ldÄ±" },
            { left: "Avarlar", right: "Ä°stanbul'u kuÅŸatan ilk TÃ¼rk devleti (2 kere)" },
            { left: "Avarlar", right: "Ãœzengi yapÄ±mÄ±nÄ± AvrupalÄ±lara Ã¶ÄŸretmiÅŸ" },
            { left: "Avarlar", right: "Juan Juan TÃ¼rkleri" },
            { left: "Avarlar", right: "Frank saldÄ±rÄ±larÄ±yla yÄ±kÄ±lmÄ±ÅŸ" },
            { left: "PeÃ§enekler, Avar, Tuna BulgarlarÄ±", right: "Ä°stanbul'u kuÅŸatmÄ±ÅŸ" },
            { left: "PeÃ§enekler, Uzlar, KÄ±pÃ§aklar", right: "Bizans'ta Ã¼cretli askerlik" },
            { left: "PeÃ§enekler, Uzlar, KÄ±pÃ§aklar", right: "Malazgirt savaÅŸÄ± sÄ±rasÄ±nda taraf deÄŸiÅŸtirmiÅŸ" },
            { left: "Uzlar", right: "OÄŸuzlarÄ±n Hristiyan olanÄ±" },
            { left: "Uzlar", right: "Romanya'nÄ±n Dobruca - Gagavuz TÃ¼rkleri" },
            { left: "Macarlar", right: "TÃ¼rk tarihinde ilk defa TÃ¼rkoloji enstitÃ¼sÃ¼nÃ¼ kurmuÅŸ" },
            { left: "Macarlar", right: "TÃ¼rk kurultayÄ± (2008-) BUGAC" },
            { left: "Macarlar", right: "Bilinen ilk liderleri Arpad" },
            { left: "Bulgarlar", right: "kelime anlamÄ± karÄ±ÅŸÄ±k - karÄ±ÅŸmak" },
            { left: "Bulgarlar (Ä°til)", right: "AlmÄ±ÅŸ Han zamanÄ±nda MÃ¼slÃ¼man" },
            { left: "Bulgarlar (Ä°til)", right: "Ä°bn-i Fablan Rihle (Yolculuk) eseri (konusu mÃ¼slÃ¼man olunmasÄ±)" },
            { left: "Moyen Ã‡ur", right: "Uygur birliÄŸi" }
        ]
    }
};

/* ================= OYUN ================= */
const PAGE_SIZE = 5;
let pool = [];
let leftSlots = [];
let rightSlots = [];
let selLeftIndex = null;
let selRightIndex = null;

function shuffle(a) { return a.sort(() => Math.random() - 0.5); }

/* ===== SELECT ===== */
function fillSelectors() {
    mainUnit.innerHTML = "";
    Object.keys(units).forEach(k => mainUnit.innerHTML += `<option>${k}</option>`);
    loadSub();
}
function loadSub() {
    subUnit.innerHTML = "";
    Object.keys(units[mainUnit.value]).forEach(k => subUnit.innerHTML += `<option>${k}</option>`);
}
mainUnit.onchange = loadSub;

/* ===== BAÅžLAT ===== */
function startGame() {
    pool = shuffle([...units[mainUnit.value][subUnit.value]]);
    const first = pool.splice(0, PAGE_SIZE);

    leftSlots = first.map(p => p.left);
    rightSlots = shuffle(first.map(p => p.right));

    render();
}

/* ===== RENDER ===== */
function render() {
    leftCol.innerHTML = "";
    rightCol.innerHTML = "";

    leftSlots.forEach((txt, i) => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerText = txt;
        d.onclick = () => selectLeft(i, d);
        leftCol.appendChild(d);
    });

    rightSlots.forEach((txt, i) => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerText = txt;
        d.onclick = () => selectRight(i, d);
        rightCol.appendChild(d);
    });
}

function selectLeft(i, el) {
    document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
    selLeftIndex = i;
    el.classList.add("selected");
    tryCheck();
}

function selectRight(i, el) {
    document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
    selRightIndex = i;
    el.classList.add("selected");
    tryCheck();
}

function tryCheck() {
    if (selLeftIndex === null || selRightIndex === null) return;

    const leftText = leftSlots[selLeftIndex];
    const rightText = rightSlots[selRightIndex];

    const correct = pool.concat(
        leftSlots.map((l, i) => ({ left: l, right: rightSlots[i] }))
    ).some(p => p.left === leftText && p.right === rightText);

    const lCard = leftCol.children[selLeftIndex];
    const rCard = rightCol.children[selRightIndex];

    if (units[mainUnit.value][subUnit.value]
        .some(p => p.left === leftText && p.right === rightText)) {

        lCard.classList.add("correct");
        rCard.classList.add("correct");

        setTimeout(() => {
            if (pool.length > 0) {
                const next = pool.shift();
                leftSlots[selLeftIndex] = next.left;
                rightSlots[selRightIndex] = next.right;
            } else {
                leftSlots.splice(selLeftIndex, 1);
                rightSlots.splice(selRightIndex, 1);
            }

            selLeftIndex = null;
            selRightIndex = null;
            render();
        }, 200);

    } else {
        lCard.classList.add("wrong");
        rCard.classList.add("wrong");

        setTimeout(() => {
            lCard.classList.remove("wrong");
            rCard.classList.remove("wrong");
            selLeftIndex = null;
            selRightIndex = null;
        }, 300);
    }
}

fillSelectors();
</script>
</body>
</html>


