<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E≈üle≈ütirme Oyunu</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #0d1117; color: #c9d1d9; padding: 20px; text-align: center; }
select, button { margin: 6px; padding: 6px 12px; background: #161b22; color: #c9d1d9; border: 1px solid #30363d; border-radius: 6px; }
.game { display: flex; gap: 12px; margin-top: 12px; }
.column { width: 50%; }
.card { background: #161b22; padding: 14px; margin: 8px 0; border-radius: 10px; border: 1px solid #30363d; cursor: pointer; transition: 0.15s; color: #c9d1d9; }
.card.selected { border-color: #58a6ff; }
.card.correct { color:#2ea043; }
.card.wrong { color:#ff7f0e; }
.card.empty { visibility: hidden; }
</style>
</head>
<body>

<h2>üîó E≈üle≈ütirme Oyunu</h2>

<select id="mainUnit"></select>
<select id="subUnit"></select>
<button onclick="startGame()">Ba≈ülat</button>

<div class="game">
    <div class="column" id="leftCol"></div>
    <div class="column" id="rightCol"></div>
</div>

<script>
const mainUnit = document.getElementById("mainUnit");
const subUnit = document.getElementById("subUnit");
const leftCol = document.getElementById("leftCol");
const rightCol = document.getElementById("rightCol");

const units = {
    "ƒ∞slamiyet √ñncesi T√ºrk Tarihi": {
        "T√ºrk adƒ±nƒ±n anlamlarƒ±": [
            { left: "Wambery", right: "T√ºremek" },
            { left: "Doerfer", right: "Devlete baƒülƒ± halk" },
            { left: "Ka≈ügarlƒ± Mahmut", right: "Olgunluk √áaƒüƒ±" },
            { left: "ƒ∞ran Kaynaklarƒ±", right: "G√ºzel ƒ∞nsan" },
            { left: "√áin Kaynaklarƒ±", right: "Miƒüfer" },
            { left: "Ziya G√∂kalp", right: "Kanun ve nizam sahibi" },
            { left: "Diƒüer", right: "G√º√ßl√º, kuvvetli, terk edilmi≈ü" }
        ],
        "Orta Asya K√ºlt√ºr Merkezleri": [
            { left: "Anav", right: "en eski (At ilk kez)" },
            { left: "Afanesyova", right: "en eski T√ºrk (Minusinsk)" },
            { left: "Tagar", right: "en geli≈ümi≈ü (Altaylƒ±lar)" },
            { left: "Andronova", right: "T√ºrk atalarƒ±nƒ±n ya≈üadƒ±ƒüƒ±" },
            { left: "Karasuk", right: "ilk demir i≈ülendiƒüi yer" },
            { left: "Kelteminar", right: "yerle≈üik ya≈üam" }
        ],
        "Boylar": [
            { left: "Anav", right: "en eski (At ilk kez)" },
            { left: "Afanesyova", right: "en eski T√ºrk (Minusinsk)" },
            { left: "Tagar", right: "en geli≈ümi≈ü (Altaylƒ±lar)" },
            { left: "Andronova", right: "T√ºrk atalarƒ±nƒ±n ya≈üadƒ±ƒüƒ±" },
            { left: "Karasuk", right: "ilk demir i≈ülendiƒüi yer" },
            { left: "Kelteminar", right: "yerle≈üik ya≈üam" }
        ],
        "Orta Asya T√ºrkleri": [
            { left: "Sakalar", right: "Bilinen ilk T√ºrk boyu" },
            { left: "Sakalar", right: "Alp Er Tunga" },
            { left: "Sakalar", right: "lk T√ºrk kadƒ±n h√ºk√ºmdar Tomris Hatun" },
            { left: "Sakalar", right: "Amazon (kadƒ±n sava≈ü√ßƒ±lar)" },
            { left: "Sakalar", right: "Balbal (mezar ta≈üƒ±) dikme geleneƒüi" },
            { left: "Sakalar", right: "Atƒ± evcille≈ütirmi≈ü d√ºnyada ilk √ºzengi" },
            { left: "Sakalar", right: "G√ºn√ºm√ºzde Rusya Federasyonunda Yakut T√ºrkleri" },
            { left: "Sakalar", right: "Bozkƒ±rƒ±n kuyumcularƒ±" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "Kurucusu Teoman" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "Ba≈ükenti √ñt√ºken. Kutsal b√∂lge veya Toprak Ana" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "Mete Vatan Sevgisi(Tunguzlara toprak vermeyip) ilk T√ºrk h√ºk√ºmdar" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "Mete orduda onlu sistem" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "T√ºrk tarihinin ilk yazƒ±lƒ± antla≈ümasƒ± √áinlilerle yapƒ±lan Kuzey ≈ûansi" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "Orta Asyada Mete T√ºrk boylarƒ±nƒ±(26) bir bayrak altƒ±nda toplayan ilk devlet" },
            { left: "Asya Hun Devleti (B√ºy√ºk Hun)", right: "Orta Asyada ilk defa siyasi birlik -Mete Han" },
            { left: "Mukan Kaƒüan", right: "I. G√∂kt√ºrklerde T√ºrk siyasi birliƒüi saƒülayan" },
            { left: "Kapgan Kaƒüan", right: "II. G√∂kt√ºrklerde T√ºrk siyasi birliƒüi saƒülayan" },
            { left: "Batƒ± Hun h√ºk√ºmdarƒ± √ái√ßi ", right: " istiklali feda etmeyi g√ºl√ºn√ß ve utan√ß verici bulmu≈ü " },
            { left: "Batƒ± Hun h√ºk√ºmdarƒ± Balamir", right: "Kavimler g√∂√ß√ºne √∂nderlik etmi≈ü" }
        ],
        "Avrupa T√ºrkleri": [
            { left: "Avrupa Hun Devleti", right: "Kurucusu Balamir -Macaristanda" },
            { left: "Avrupa Hun Devleti en parlak d√∂nem", right: "Attila" },
            { left: "Avrupa Hun Devleti", right: "Avrupa'da kurulan ilk T√ºrk devleti" },
            { left: "Hem Orta Asya hem Avrupada Kurulanlar", right: "B√ºy√ºk Hunlar ve Avarlar" },
            { left: "Avrupa Hun Devleti", right: "Margos Barƒ±≈üƒ± ve Anatolyus Ant." },
            { left: "Avrupa Hun Devleti", right: "Galya ve ƒ∞talya seferleri (Papanƒ±n ricasƒ±)" },
            { left: "Atilla'nƒ±n Roma'yƒ± almaktan vazge√ßme nedenleri:", right: "Papa I. Leon'un ricasƒ±" },
            { left: "Atilla'nƒ±n Roma'yƒ± almaktan vazge√ßme nedenleri:", right: "Roma'nƒ±n Hristiyanlarca kutsal olmasƒ±" },
            { left: "Atilla'nƒ±n Roma'yƒ± almaktan vazge√ßme nedenleri:", right: "Batƒ± Roma'nƒ±n g√ºc√ºn√º kƒ±rdƒ±ƒüƒ±na inanmasƒ±" },
            { left: "Atilla'nƒ±n Roma'yƒ± almaktan vazge√ßme nedenleri:", right: "Doƒüuda Sasani tehlikesinin bulunmasƒ±" },
            { left: "Attilla'nƒ±n √ºnvanlarƒ±", right: "(Etzel (Nibelungen)(Hun burgant m√ºcadelesi)" },
            { left: "Attilla'nƒ±n √ºnvanlarƒ±", right: "Cesur Kavimlerin Efendisi" },
            { left: "Attilla'nƒ±n √ºnvanlarƒ±", right: "Tanrƒ±nƒ±n kam√ßƒ±sƒ±" },
            { left: "Avarlar", right: "Kurucusu Bayan Han" },
            { left: "Avarlar", right: "ƒ∞stanbul'u ku≈üatan ilk T√ºrk devleti (2 kere)" },
            { left: "Avarlar", right: "√úzengi yapƒ±mƒ±nƒ± Avrupalƒ±lara √∂ƒüretmi≈ü" },
            { left: "Avarlar", right: "Juan Juan T√ºrkleri" },
            { left: "Avarlar", right: "Frank saldƒ±rƒ±larƒ±yla yƒ±kƒ±lmƒ±≈ü" }
        ]
    },
    "Matematik": {
        "1. √únite": [
            { left: "2+2", right: "4" },
            { left: "5*3", right: "15" }
        ]
    }
};

const PAGE_SIZE = 5;
const FIXED_LEFT = 3; // soldaki sabit kart sayƒ±sƒ±
let pool = [];
let activeLeft = [];
let activeRight = [];
let selLeftIndex = null;
let selRightIndex = null;

function shuffle(a) { return a.sort(()=>Math.random()-0.5); }
function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

function fillSelectors(){
    mainUnit.innerHTML="";
    Object.keys(units).forEach(k=>mainUnit.innerHTML+=`<option>${k}</option>`);
    loadSub();
}
function loadSub(){
    subUnit.innerHTML="";
    Object.keys(units[mainUnit.value]).forEach(k=>subUnit.innerHTML+=`<option>${k}</option>`);
}
mainUnit.onchange = loadSub;

function startGame(){
    pool = shuffle([...units[mainUnit.value][subUnit.value]]);
    activeLeft = [];
    activeRight = [];
    // ba≈üta sabit soldaki kartlar
    for(let i=0;i<FIXED_LEFT;i++){
        const p = pool.shift();
        if(!p) break;
        activeLeft.push(p);
        activeRight.push(p);
    }
    render();
}

function render(){
    leftCol.innerHTML="";
    rightCol.innerHTML="";

    activeLeft.forEach((p,i)=>leftCol.appendChild(card(p? p.left : "", ()=>selectLeft(i), !!p)));
    activeRight.forEach((p,i)=>rightCol.appendChild(card(p? p.right : "", ()=>selectRight(i), !!p)));
}

function card(text, fn, visible){
    const d=document.createElement("div");
    d.className="card";
    if(!visible) d.classList.add("empty");
    d.innerText=text;
    d.onclick=fn;
    return d;
}

function selectLeft(i){ clearSelect(); selLeftIndex=i; leftCol.children[i].classList.add("selected"); check(); }
function selectRight(i){ clearSelect(); selRightIndex=i; rightCol.children[i].classList.add("selected"); check(); }
function clearSelect(){ document.querySelectorAll(".card").forEach(c=>c.classList.remove("selected")); }

function check(){
    if(selLeftIndex===null || selRightIndex===null) return;
    const L=activeLeft[selLeftIndex];
    const R=activeRight[selRightIndex];
    if(L && R && L===R){
        activeLeft[selLeftIndex]=null;
        activeRight[selRightIndex]=null;
        // kƒ±sa gecikme sonrasƒ± refill
        setTimeout(()=> refill(), 300);
    }
    selLeftIndex=selRightIndex=null;
    render();
}

function refill(){
    // soldaki bo≈ü slotlarƒ± tespit et
    const emptyLeftIndices = activeLeft.map((v,i)=>v===null?i:null).filter(v=>v!==null);
    // sadece soldaki kart sayƒ±sƒ± sabit 3 olacak ≈üekilde ekleme
    const needed = FIXED_LEFT - activeLeft.filter(v=>v!==null).length;
    for(let i=0;i<needed && pool.length>0;i++){
        const p = pool.shift();
        const slot = emptyLeftIndices[i];
        activeLeft[slot]=p;

        // saƒüda rastgele bo≈ü slotlara yerle≈ütir
        const emptyRightIndices = activeRight.map((v,j)=>v===null?j:null).filter(v=>v!==null);
        if(emptyRightIndices.length) activeRight[rand(emptyRightIndices)] = p;
    }
}

fillSelectors();
</script>
</body>
</html>
